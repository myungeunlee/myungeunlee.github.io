### 20

SQS 표준 대기열 - 무한한 확장성을 제공함  
온프레미스 MySQL 데이터베이스 -> AWS로 마이그래이션, 정기적으로 가져오면 

데이이터베이스에서 엄청난 양의 쓰기 작업 발생 => **프로비저닝된 IOPS SSD 스토리지**로 RDS for MySQL DB 인스턴스를 프로비저닝함.  

짧은 지연 시간이 필요한 다중 인스턴스 애플리케이션 개발 => **배치그룹 사용** , 배치 그룹 중 클러스터 그룹을 사용하면 인스턴스가 단일 AZ에 있을 수 있으므로 인스턴스 간의 지연 시간 및 처리량이 향상 됨. 클러스터 배치 그룹은 매개변수를 통해 Auto Scaling 과 결합됨.  

DMS(Datebase Mirgration Service)- 온프레미스의 데이터베이스를 쉽게 AWS로 마이그레이션 가능  
Snowball - 주로 S3의 데이터를 옮기는 데 사용.  
Aurora - MySQL, PostgreSQL 만 지원 됨. 데이터베이스에 대한 자동 패치를 지원. 다중 AZ 개념 x, SQL 기반 쿼리임.  
Aurora 글로벌 데이터베이스 - 기본 지역에서 성능 저하 또는 중단이 발생하는 경우 보조 지역 중 하나를 승격하여 읽기/쓰기를 할 수 있음. Aurora 클러스터는 완전한 지역 중단이 발생하여도 1분 이내에 복구가 가능함.   

IAM 사용자 OR 역할 자격 증명, 인증 토큰 사용 -> AWS RDS DB 인스턴스 OR 클러스터에 연결할 수 있음  
IAM DB 인증 토큰 - AWS 액세스 키를 사용하여 생성되며 데이터베이스 사용자 자격 증명을 따로 저장할 필요가 없음.  
EC2, S3 에 사용자 정보가 담긴 구성 파일을 사용하는것은 보안에 취약함.  

S3 게이트웨이 엔드포인트 - VPC에서 S3로의 비공개 액세스를 제공함. 인터넷에 연결되지 않고도 액세스 가능. 추가비용 없음  
S3 인터페이스 엔드포인트 - VPN 및 AWS Direct Connect(DX)를 통해 온프레미스에 있는 애플리케이션이나 VPC 피어링을 통해 다른 AWS 리전에 있는 애플리케이션에서 엔드포인트에 직접 액세스가 가능.  

* 버전관리: 복구에 대한 솔루션(고가용성이랑 다른 개념)  


### 19
Amazon Linux 기반 HPC(고성능 컴퓨팅) 환경을 위한 스토리지, 공유 스토리지 => Lustre용 Amazon FSx  

Shield Standard - 기본적으로 활성화 되어 있음. 따로 활성화할 필요x  
Shield Advanced - L4, L7도 포함되며, DDoS 보호 기능을 제공하며, WAF가 기본적으로 제공됨. 

ECS의 시작 유형은 EC2(server), Fargate(serverless)으로 나뉨.  
Lambda - Auto Scaling 작업 x  
대상 추적 정책 - 메트리 지표에 따라 자동 크기 조정이 가능함.  

복제 대기 시간의 최소화 - Aurora의 복제 지연이 지역 내에서 100ms이고 지역간 1초 미만임(참고: 사용자의 응답 지연 시간 최소화와 다른 맥락)  

Global Accelerator - Edge Location을 통해 요청 및 응답을 수행하기에 사용자의 인터넷 대기 시간을 줄일 수 있음. 고정 ip주소로 수행.

Athena - serverless로 인프라 비용을 지불하지 않음. 사용할 때만 비용을 지불함.  

* S3에서 사용크기보다 더 많은 금액이 청구된 이유  
=> S3 버킷에 버전 관리 활성화: 버전 관리가 활성화되어 있고, 객체에 삭제 마커가 있는 경우 저장 비용을 지불해야함.  
=> 불완전한 S3 멀티파트 업로드: S3에서 불완전한 멀티파트 업로드를 수동으로 나열하고 중단할 수 있지만 조직 내의 업로드, 버킷 및 계정 수가 증가함에 따라 수동으로 하는 것은 번거로움. Management 콘솔에서 불완전한 멀티파트 업로드 일부를 볼 수 없음.  

* 웹에 배포되는 콘텐츠의 원본에 대한 부담의 최소화하면서 소비자에게 파일을 제공하는 솔루션 => S3버킷을 CloudFront 배포의 Origin으로 처음 설정하면 모든 사용자에게 버킷의 파일에 대한 권한을 부여하게 됨. CloudFront는 OAI을 사용하여 배포와 연결함. OAI를 원본과 연결하여 S3콘텐츠 중 일부 및 전부를 보호할 수 있음. CloudFront를 통해 S3파일에 액세스하면 OAI가 파일을 대신 가져옴. 이때 S3 URL을 통해 직접 파일을 요청하는 경우 액세스는 거부됨.  


### 18 
고가용성, 탄력성을 가진 낮은 관리 노력의 아키텍처 => 여러 가용 영역의 인스턴스를 대상으로 하여 AutoScaling 그룹에서 지원하는 NLB를 생성하면 OK  

클라이언트 측 암호화 - 클라이언트에서 서버로 데이터가 넘어올 때 암호화되는 것.  
승인된 사람만 DB 데이터를 볼 수 있는 방방 => KMS 고객 관리형 키로 RDS 암호화를 사용.  

CloudFront - CDN로 주로 콘텐츠를 캐시 하는 데 최적화되어 있음. HTTP 프로토콜을 처리하도록 설계. 보통 정적 웹 페이지에 많이 사용됨.    
Global Accelerator - Edge Location을 사용해서 사용자에서 애플리케이션까지 가장 가까운 리전 엔드포인트로 가는 최적을 경로를 찾음. HTTP, TCP/UDP 와 같은 프로토콜에 사용.  

CloudTrail 활성화 후 CloudTrail을 보호하고 보호하기 위한 보호장치, 보안조치
=> 로그 파일 유효성(무결성) 검사 - S3버킷에 저장된 AWS CloudTrail 로그 파일의 무결성을 검증하고 CloudTrail이 S3버킷으로 로그 파일을 전달한 이후 로그 파일이 변경, 수정 또는 삭제되었는지를 감시할 수 있음.  
=> CloudTrail은 지정된 S3 서버 측 암호화(SSE)를 사용하여 지정된 S3 버킷에 전달된 모든 로그 파일을 암호화 함. 필요한 경우 KMS키로 로그파일을 암호화 함. S3는 암호 해독 권한이 있는 경우 로그 파일의 암호를 자동으로 해독함.  

Fargate - 자체적으로 확장되지 않음. Auto Scaling을 통해서 확장이 가능함 => 불규칙한 패턴 x, 서버리스
Lambda - 불규칙한 패턴에 사용됨.  

IPv6는 단독으로 VPC에 사용하지 못함. 먼저 IPv4가 필요함. 

VPC 공유 - 다른 계정이지만 동일한 조직에 이상적인 방법. 가장 비용 효율적임. 여러 AWS 계정에서 EC2, RDS, Redshift 클러스터, Lambda 함수 같은 애플리케이션 리소스를 중앙 관리형 공유 VPC로 생성할 수 있음.  
=> VPC(소유자)를 소유하는 계정은 동일한 조직에 속한 다른 계정(참여자)와 한개 또는 어러 개의 서브넷을 공유 가능. AWS Oraganiztions 서브넷을 공유한 후 참여자는 공유된 서브넷의 해당 애플리케이션 리소스를 보기, 생성, 수정, 삭제가 가능함. 참여자는 다른 참여자 또는 VPC 소유자에 속한 리소스에 대한 액세는 불가함.  

ALB를 사용하여 인터넷에 애플리케이션을 제공. 애플리케이션에서 비정상적인 트래픽 액세스 패턴을 식별함. 가시성을 높이기위한 옵션 => S3에 대한 ALB액세스 로깅을 활성화. Athena에서 테이블을 생성하고 로그를 쿼리함.
Athena - S3와 긴밀하게 호환되는 분석 서비스.  

버킷에 새 항목이 생성될 때 SQS 대기열에 알림을 보내도록 설정된 S3 버킷이 있음. 새 개체가 생성될 때 알림을 받기를 원함. 현재 워크플로를 유지해야함  
=> S3 버킷에 대해서 두개의 SQS 대기열을 구동하고 싶음. => SNS 사용하면 됨.
=> 버킷 업데이트를 위한 SNS 주제 및 SQS 대기열을 생성함. 새 주제에 이벤트를 보내도록 버킷을 업데이트함. 주제의 두 대기열에 대한 구독을 추가함.  
SNS - 두개 및 여러 개의 SQS 대기열 구동이 가능함.  
SQS - SNS를 폴링하지 않음
* 팬아웃 시나리오 : sns주제에 게시된 메시지가 복제되어 여러 엔드포인트로 푸시되는 경우. 비동기적 처리가 가능함.


### 17
게임 - UDP로 통신하기 떄문에 NLB 로 로드밸러싱  

Fargate와 FSx for Lustre은 함께 지원되지 않음. EFS와 호환됨  

Transfer Accleration - 가장 가까운 AWS 데이터 센터 or 가장 가까운 엣지로케이션으로 데이터를 가져옴.  

보안그룹 - 상태 저장(Statefull) 특성을 가져 한쪽(인바운드 or 아웃바운드)을 허용하면 다른 한쪽의 규칙은 자동적으로 따라감.  
ACL - 상태 비서장(Stateless) 특성으로 인바운드/아웃바운드 모두에게 명시적으로 규칙을 설정해 줘야 함.  
* 임시포트범위: windows(49152-65535), Linus(32768-61000)  

Elastic Beanstalk - 용량 프로비저닝, 로드 밸런싱, 자동 크기 조정, 애플리케이션 상태 모니터링 등에 대해 자동으로 처리하도록 함.  
* 읽지 전용 복제본은 고가용성을 높여주지 않음!  

조직은 단일 S3 버킷을 기반으로 중앙 집중식 로그 분석 시스템을 생성하려고 함. 지역을 떠날 수 없으며 가능한 한 운영 비용을 최소화하기를 원함 => S3 동일 지역 복제를 사용해서 S3 버킷의 로그를 다른 S3 버킷으로 복제함. 분석이 복제한 S3버킷을 사용  
S3 동일 지역 복제(SRR) - 동일한 AWS 리전 내에서 대상 스토리지 클래스와 동일한 이중화를 갖는 다른 S3 객체 사본을 만듬. 이름 통해 다른 S3 버킷에서 로그를 자동으로 집계하여 지역 내에서 처리하거나 테스트 환경과 개발 환경 간에 실시간 복제를 구성할 수 있음.  


모든 작업의 출력 및 데이터 저장. 수백 개의 작업이 동시에 작동. 빠른 속도로 읽고 쓸 수 있도록. 총 저장 공간은 1TB 초과X => 프로비저닝된 처리량 모드의 EFS.  
EFS 옵션
- 버스팅 : 기본모드. EFS 처리량은 추가요금이 발생하지 않지만 파일 시스템이 커질수록 처리량도 비례하며 커짐. 속도가 일정함.
- 프로비저닝 : 사용한 만큼에 대한 추가 요금이 발생, 파일 시스템이 상대적으로 작지만 파일 시스템의 사용량에 대해 높은 처리량이 필요한 경우 적합.  


### 16
매일 30TB 이상의 클릭스트림 데이터를 분석할 수 있는 플랫폼. 전송 및 처리 중에 클릭스팀 데이터로 무엇을 해야하는지  
=> Kinesis Data Streams 에서 데이터를 수집, Kinesis Data Firehose로 S3 데이터 레이크로 데이터를 전송, Redshift에 데이터를 로그하여 분석  
=> 콘텐츠를 캐싱/전송하는 것이 아니라 수집하려는거!  

TTL(Time to Live) 를 활성화하여 DynamoDB 데이터 수명관리 가능. (자동 삭제 스트립트 예약보다 저렴?)  

EFS - 스토리지를 프로비저닝하거나 관리하지 않고도 파일 데이터를 공유 O, 애플리케이션 중단 없이도 페타바이트까지 온디맨드 형식으로 확장 가능. Linux 용 공유 볼륨임!  

정형 및 반정형 데이터로 빅데이터 처리를 위한 프레임워크를 사용하는 솔루션을 만들어야함 => EMR(빅데이터 처리가 가능한 클라우드 서비스)  
SQL 쿼리 및 비즈니스 인텔리전스 도구는 데이터에 액세스할 수 있어야함 => Redshift(SQL 쿼리를 가능하게 하며 BI 도구에 직접 연결할 수 있는 스토리지)  
* S3는 SQL 처리 할 수 없음 (Athena와의 조합시 가능)  

Auto Scaling - 가동 중지 시간 없이 자동으로 확장가능.  
인스턴스 크기 변경시 가동 중지 시간 발생  



